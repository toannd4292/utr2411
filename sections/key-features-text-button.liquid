<div class="page-width text-center pt-lg-3 pt-sm-3">
  <div class="text-center mb-4 mb-sm-1">
    <h2 class="text-uppercase section-title section-title-sm mb-0">{{ section.settings.heading }}</h2>
    {%- if section.settings.heading_permission == "YES" -%}
      <div class="divider-sm-teal divider-lg-teal"></div>
    {%- endif -%}
  </div>
</div>

<div class="pb-lg-5 pt-lg-1 pt-sm-2 pb-sm-4 ps-1 px-sm-0 ps-md-1">
  <div class="keyfeature-carousel owl-carousel">
    {% for block in section.blocks %}
      <div class="key-box">
        <div class="position-relative">
          <div
            class="card-img-d media--square border-radius-lg-3 border-radius-sm-3 position-relative"
            style="
              background: url('{{ block.settings.block_image | img_url: 'large' }}') no-repeat top center;
              background-size: cover;
            "
          >
            <div class="card-img-overlay border-radius-lg-3 border-radius-sm-3"></div>
          </div>
          <div class="keyheading-wrap text-sm-center">
            <h2 class="h2-spec text-uppercase keyheading fw-bold font-tungsten-medium pb-lg-0 pb-sm-5 font-lg-65 section-title-md font-sm-35 mb-0 mt-0 lh-xl-78">
              {{ block.settings.heading }}
            </h2>
          </div>
          <div class="d-flex flex-column justify-content-center align-items-center h-100 key-list">
            <div class="z-index-0 position-relative text-center key-position p-lg-3 p-sm-1">
              <p class="font-sm-14 font-md-14 fw-bold lh-sm-19">{{ block.settings.description }}</p>
              <div class="d-flex justify-content-center align-items-center mt-3 gap-2 z-index-3 position-relative">
                {%- comment -%}
                  Instead of an App Store image link, we have a custom text-based button
                {%- endcomment -%}
                {% if block.settings.button_text != blank and block.settings.button_link != blank %}
                  <a
                    href="{{ block.settings.button_link }}"
                    target="_blank"
                    class="app-radius-btn white-btn  btn-white custom-btn-sub"
                  >
                    {{ block.settings.button_text }}
                  </a>
                {% endif %}
              </div>
            </div>
          </div>
        </div>
      </div>
    {% endfor %}
  </div>
</div>
<style>
  @media(max-width:679px){
    .keyheading-wrap .h2-spec{
  font-size:29px!important}
  }
  
</style>
{% schema %}
{
  "name": "Key Features Text",
  "presets": [
    {
      "name": "Key Features Text",
      "category": "Key Features"
    }
  ],
  "settings": [
    {
      "type": "text",
      "id": "heading",
      "label": "Heading Title"
    },
    {
      "type": "radio",
      "id": "heading_permission",
      "label": "Do You Want Underline Below Heading?",
      "default": "NO",
      "options": [
        {
          "value": "NO",
          "label": "NO"
        },
        {
          "value": "YES",
          "label": "YES"
        }
      ]
    }
  ],
  "blocks": [
    {
      "type": "home-card",
      "name": "section-column",
      "settings": [
        {
          "type": "image_picker",
          "id": "block_image",
          "label": "Card Image"
        },
        {
          "type": "text",
          "id": "heading",
          "label": "Heading Title"
        },
        {
          "type": "richtext",
          "id": "description",
          "label": "Description"
        },
        {
          "type": "text",
          "id": "button_text",
          "label": "Button Text"
        },
        {
          "type": "url",
          "id": "button_link",
          "label": "Button Link"
        }
      ]
    }
  ]
}
{% endschema %}

{% stylesheet %}
  /* (Optional) Add custom styling for your new text button, if desired. */
  .white-btn {
    background-color: #fff;
    color: #000;
    padding: 0.75rem 1rem;
    border-radius: 4px;
    text-transform: initial;
    font-weight: bold;
    text-decoration: none;
  }
{% endstylesheet %}

{% javascript %}
  /* (Optional) Add JS if needed for carousel initialization or custom behavior. */
{% endjavascript %}